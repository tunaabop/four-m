<head class="has-background-dark">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Four'm</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="./public/css/style.css" />
</head>

<section class="hero is-large has-background-dark">    
  <h1 class="has-text-light is-size-2 ml-6">Welcome to <span class=" has-text-primary">Four'm</span>{{#if isLoggedIn}}, {{name}}{{/if}}.</h1>
</section>

  {{#if isLoggedIn}}
  {{!-- form to create new post here once user logs in --}}
 
  <div id="expand" style=" display:none;" class="col-md-6 has-text-centered is-justify-content-center is-size-4">
    {{!-- future implementation: add a create-post button --}}
    <h3 class="mt-6 has-text-dark">Create a New Post:</h3>
    <form action="/upload" method="POST" enctype="multipart/form-data" class="form new-project-form is-justify-content-center">
      <div class="form-group my-6 field">
        {{!-- upload image file --}}
        <div class="has-text-dark file is-normal is-primary is-justify-content-center">
          <label class="file-label">
            <input class="form-input file-input" type="file" id="file" name="image_path">
            <span class="file-cta">
              <span class="file-icon">
                <i class="fas fa-upload"></i>
              </span>
              <span class="file-label has-text-light">
                Select from computer
              </span>
            </span>
            <span id='file-name' class="file-name has-text-dark">
              ..upload file here..
            </span>
          </label>
        </div>
        {{!-- <label for="post-image">Post image here:</label>

        <input class="form-input" type="file" id="post-image" name="image_path" /> --}}
        
      </div>
      <div class="form-group mb-5 has-text-dark">
        <label class="has-text-dark" for="post-caption">Caption:</label>
        <textarea class="form-input has-text-dark" id="post-caption" name="caption"></textarea>
      </div>
      <button class="button is-success is-light" type="submit">Upload Post</button>
      {{!-- <div class="form-group">
        <button type="submit" class="btn btn-primary">Create</button>
      </div> --}}
    </form>
  </div>
{{/if}}
<br>
{{!-- display #explore posts here --}}
<h2 class="is-$primary  has-text-primary is-size-2 ml-6 ">Explore Current Posts:</h2>
<div class='pin_container'>
{{#each posts as |post| }}
{{!-- <div class="row mb-4 post" style="background-color: rgb(54, 50, 50)">
  <div class="col-md-5">
    <h2>
      {{post.caption}}
      
    </h2>
    <a href="/post/{{post.post_id}}" style="display:block; width:50%; margin:auto">{{{get_image post.image_path}}}</a>
    
    <div class="post-text" style="text-align:center">
      <p>Created by {{post.user.username}} on {{format_date post.date_created}}</p> 
      <button class="button is-primary is-light is-small is responsive" id="btn-follow">Follow</button>
    </div>

  </div>
</div> --}}
<div class="card">
  <div class="card-image">
    <figure class="image">
      {{!-- <img src="https://bulma.io/images/placeholders/1280x960.png" alt="Placeholder image"> --}}
      <a href="/post/{{post.post_id}}">{{{get_image post.image_path}}}</a>
    </figure>
  </div>
  <div class="card-content">
    <div class="media">
      {{!-- <div class="media-left">
        <figure class="image is-48x48">
          <img src="https://bulma.io/images/placeholders/96x96.png" alt="Placeholder image">
        </figure>
      </div> --}}
      <div class="media-content">
        <p class="title is-4">{{post.caption}}</p>
        <p class="subtitle is-6">@{{post.user.username}}</p>
      </div>
    </div>

    <div class="content">
      <a>
      {{!-- <a href="#">#css</a> <a href="#">#responsive</a> --}}
      Posted on {{format_date post.date_created}}
      </a>
    </div>
  </div>
</div>
{{/each}}

</div>

{{!-- <script src="/js/main.js"></script> --}}
